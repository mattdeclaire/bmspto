---
import { contentfulClient } from "../lib/contentful";
import { documentToHtmlString } from "@contentful/rich-text-html-renderer";
import PageLayout from "@layouts/PageLayout.astro";

export async function getStaticPaths() {
    const pages = await contentfulClient.getEntries({ content_type: 'page' });

    return pages.items.map(page => ({
        params: { slug: page.fields.slug },
        props: {
            ...page.fields,
            body: documentToHtmlString(page.fields.body),
        },
    }));
}

const page = Astro.props;
---
<PageLayout title={page.title}>
    <h1>{page.title}</h1>
    <div set:html={page.body}></div>
</PageLayout>